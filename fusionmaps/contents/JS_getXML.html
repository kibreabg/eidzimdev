<?xml version="1.0" encoding="iso-8859-1"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>FusionCharts v3 Documentation</title>
<link rel="stylesheet" href="Style.css" type="text/css" />
</head>

<body>
<table width="98%" border="0" cellspacing="0" cellpadding="3" align="center">
  <tr>
    <td valign="top" class="pageHeader">FusionMaps, JavaScript and <span class="codeInline"><strong>getXML()</strong></span> Method </td>
  </tr>
  <tr>
    <td valign="top" class="text"><p>You can get the XML data of the maps generated by FusionMaps at client side using the <span class="codeInline">getXML()</span> method of each map. In this section, we'll show you how to attain this. </p>
      <p>The first step is to set <span class="codeInline">registerWithJS</span> flag of map as <span class="codeInline">1</span>, as shown under: </p></td>
  </tr>
  <tr>
    <td valign="top" class="text"><p class="codeBlock">&lt;div id=&quot;map1div&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;FusionMaps<br />
&lt;/div&gt;<br />
&lt;script language=&quot;JavaScript&quot;&gt; <br />
&nbsp;&nbsp;&nbsp;var map1 = new FusionMaps(&quot;../../FusionMaps/FCMap_World.swf&quot;, &quot;map1Id&quot;, &quot;400&quot;, &quot;300&quot;, &quot;0&quot;, <strong>&quot;1&quot;</strong>); <br />
&nbsp;&nbsp;&nbsp;map1.setDataXML(&quot;&lt;map&gt;...data here... &lt;/map&gt;&quot;);<br />
&nbsp;&nbsp;&nbsp;map1.render(&quot;map1div&quot;);<br />
&lt;/script&gt;</p>    </td>
  </tr>
  <tr>
    <td valign="top" class="text"><p>Thereafter, you can invoke the <span class="codeInline">getXML()</span> method of the map object to print it. </p>    </td>
  </tr>
  <tr>
    <td valign="top" class="codeBlock">&lt;HTML&gt;<br />
      &lt;HEAD&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;TITLE&gt;FusionMaps &amp; JavaScript - Getting Map XML Example&lt;/TITLE&gt; <br />
&nbsp;&nbsp;&nbsp;&lt;SCRIPT LANGUAGE=&quot;Javascript&quot; SRC=&quot;../../FusionMaps/FusionMaps.js&quot;&gt;&lt;/SCRIPT&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>function getMapXML(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="codeComment">&nbsp;//Get map from its ID</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var mapToPrint = getMapFromId(&quot;map1Id&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(mapToPrint.getXML());<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</strong><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/SCRIPT&gt;<br />
&lt;/HEAD&gt;<br />
&lt;BODY&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;CENTER&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;h2&gt;FusionMaps and JavaScript - getXML() Example&lt;/h2&gt;<br />
<br />
&nbsp;&nbsp;&nbsp;&lt;div id=&quot;map1div&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FusionMaps<br />
&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;script language=&quot;JavaScript&quot;&gt; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var map1 = new FusionMaps(&quot;../../FusionMaps/FCMap_World.swf&quot;, &quot;map1Id&quot;, &quot;400&quot;, &quot;300&quot;, &quot;0&quot;, <strong>&quot;1&quot;</strong>); <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map1.setDataXML(&quot;&lt;map&gt;...data here... &lt;/map&gt;&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map1.render(&quot;map1div&quot;);<br />
&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;center&gt;&lt;input type='button' value='Show Map XML' onClick='javascript:getMapXML();'&gt;&lt;/center&gt;<br />
&nbsp;&nbsp;&nbsp;
<br />
&nbsp;&nbsp;&nbsp;&lt;/CENTER&gt;<br />
&lt;/BODY&gt;<br />
&lt;/HTML&gt;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><p>In the above code, we're first creating a map with DOM Id as <span class="codeInline">map1Id</span>. We also register it with JavaScript. Thereafter, we've created a HTML button, which when clicked invokes the local <span class="codeInline">getMapXML()</span> function. This function just gets the reference to the map using <span class="codeInline">getMapFromId()</span> function and finally invokes the <span class="codeInline">getXML()</span> method on the map. </p>
      <p class="highlightBlock">If you're specifying the data of the map using dataURL, make sure to call <span class="codeInline">getXML()</span> only in <span class="codeInline">FC_Rendered</span> event of the map, as before that the map will not return the correct XML. </p>
      <p>&nbsp;</p></td>
  </tr>
  <tr>
    <td valign="top" class="header">Getting &lt;map&gt; attribute value </td>
  </tr>
  <tr>
    <td valign="top" class="text">If you wish to get the attribute value specified for <span class="codeInline">&lt;map&gt;</span> element in the XML, you can use<span class="codeInline"> getMapAttribute(attributeName)</span> API as under: </td>
  </tr>
  <tr>
    <td valign="top" class="codeBlock">&lt;HTML&gt;<br />
&lt;HEAD&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;TITLE&gt;FusionMaps &amp; JavaScript - Getting Map Attribute Example&lt;/TITLE&gt; <br />
&nbsp;&nbsp;&nbsp;&lt;SCRIPT LANGUAGE=&quot;Javascript&quot; SRC=&quot;../../FusionMaps/FusionMaps.js&quot;&gt;&lt;/SCRIPT&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;SCRIPT LANGUAGE=&quot;JavaScript&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>function getMapAttrib(){<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="codeComment">&nbsp;//Get map from its ID</span><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var mapToPrint = getMapFromId(&quot;map1Id&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alert(mapToPrint.getMapAttribute('bgColor'));<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</strong><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/SCRIPT&gt;<br />
&lt;/HEAD&gt;<br />
&lt;BODY&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;CENTER&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;h2&gt;FusionMaps and JavaScript - getMapAttribute() Example&lt;/h2&gt;<br />
<br />
&nbsp;&nbsp;&nbsp;&lt;div id=&quot;map1div&quot;&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FusionMaps<br />
&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;script language=&quot;JavaScript&quot;&gt; <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var map1 = new FusionMaps(&quot;../../FusionMaps/FCMap_World.swf&quot;, &quot;map1Id&quot;, &quot;400&quot;, &quot;300&quot;, &quot;0&quot;, <strong>&quot;1&quot;</strong>); <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map1.setDataXML(&quot;&lt;map bgColor='FF5904' &gt;...data here... &lt;/map&gt;&quot;);<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;map1.render(&quot;map1div&quot;);<br />
&nbsp;&nbsp;&nbsp;&lt;/script&gt;<br />
&nbsp;&nbsp;&nbsp;&lt;center&gt;&lt;input type='button' value='Get Map BgColor onClick='javascript:getMapAttrib();'&gt;&lt;/center&gt;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp;&lt;/CENTER&gt;<br />
&lt;/BODY&gt;<br />
&lt;/HTML&gt;</td>
  </tr>
  <tr>
    <td valign="top" class="text"><p>Here, we've first defined the <span class="codeInline">bgColor</span> attribute of map in XML as <span class="codeInline">'FF5904'</span>. Thereafter, we've defined a button which when clicked calls the <span class="codeInline">getMapAttribute('bgColor')</span> method to retrieve the caption. </p>
    <p>If the attribute was not initially specified in XML or an empty value was specified, the map returns <span class="codeInline">&quot;null&quot;</span> value. </p></td>
  </tr>
</table>
</body>
</html>
